<!DOCTYPE html>
{% load static %}
<html>
  <head>
    <meta charset="utf-8" />
    <title>Mazda Language Translator</title>
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <meta content="Webflow" name="generator" />
    <link href="https://uploads-ssl.webflow.com/6330f9dbe239121517e39573/css/komuntus-dynamite-site.webflow.399a178d4.css" rel="stylesheet" type="text/css" />
    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
    <script src="https://code.jquery.com/jquery-3.6.1.min.js" integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script>
    <script type="text/javascript">
      WebFont.load({
        google: {
          families: ["Roboto:300,regular,500", "Roboto Condensed:300,regular,700", "Roboto Slab:300,regular,700", "Arbutus Slab:regular"]
        }
      });
    </script>
    <!--[if lt IE 9]>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" type="text/javascript"></script>
		<![endif]-->
    <script type="text/javascript">
      ! function(o, c) {
        var n = c.documentElement,
          t = " w-mod-";
        n.className += t + "js", ("ontouchstart" in o || o.DocumentTouch && c instanceof DocumentTouch) && (n.className += t + "touch")
      }(window, document);
    </script>
    <link href="https://uploads-ssl.webflow.com/6330f9dbe239121517e39573/6330f9dce239128a59e3957e_New%20icon.ico" rel="shortcut icon" type="image/x-icon" />
    <link href="https://uploads-ssl.webflow.com/6330f9dbe239121517e39573/6330f9dce239125d78e39594_metric-webclip.png" rel="apple-touch-icon" />
    <link href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" rel="stylesheet" />
    <style>
        /* (B) STAR RATING WRAPPER */
        .starwrap { display: flex; padding: 5px; margin-right: 10px;}

        /* (C) STAR ICON */
        .star {
        font-size: 24px; color: #FF0000;        
        font-style: normal; font-weight: normal; font-variant: normal;
        text-transform: none; 
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
         
        
        }
        .star::before { content: "\f005"; }
        .star.on { color: #ffe000; }

        #textarea-container {
            position: relative;
        }
        #textarea-container textarea {
            width: 100%;
            height: 100%;
            box-sizing: border-box;
        }
        #textarea-container a {
            position: absolute;
            top: 0;
            right: 0;
            margin-right: 5px;
            margin-top: 3px;
        }
    </style>
  
  </head>
  <body>
    <div data-collapse="medium" data-animation="default" data-duration="400" data-easing="ease" data-easing2="ease" role="banner" class="navigation w-nav">
      <div class="w-container">
        <a href="{% url 'home_page' %}" class="brand-link w-nav-brand">
          <div class="logo-text">Mazda Language Translator</div>
        </a>
        <nav role="navigation" class="nav-menu w-nav-menu">
          <a href="{% url 'how_it_works' %}" class="nav-link w-nav-link">How it works</a> 
        </nav>
        <div class="nav-link menu w-nav-button">
          <div class="w-icon-nav-menu"></div>
        </div>
      </div>
    </div>
    <div data-delay="4000" data-animation="slide" class="slider w-slider" data-autoplay="false" data-easing="ease" data-hide-arrows="false" data-disable-swipe="false" data-autoplay-limit="0" data-nav-spacing="3" data-duration="500" data-infinite="true">
      <div class="w-slider-mask">
        <div class="slide _1 w-slide">
          <div class="w-container"></div>
        </div>
        <div class="slide _2 w-slide">
          <div class="w-container"></div>
        </div>
        <div class="slide _3 w-slide">
          <div class="w-container"></div>
        </div>
      </div>
      <div class="w-slider-arrow-left">
        <div class="w-icon-slider-left"></div>
      </div>
      <div class="w-slider-arrow-right">
        <div class="w-icon-slider-right"></div>
      </div>
      <div class="w-slider-nav w-round"></div>
    </div>
    <div id="top" class="section main wf-section">
      <div class="w-container">
        <div class="w-row">
          <div class="w-col w-col-6">
            <h1 class="main-heading">Translate up to 60 international languages</h1>
            {% comment %} <a href="#" class="button hollow">Learn More</a> {% endcomment %}
          </div>
         

          <div class="w-col w-col-6"></div>
        </div>
      </div>
      <div class="w-container">
        <div class="w-form">
          <form id="email-form" name="email-form" data-name="Email Form" method="get">
            <div></div>
            <div class="w-row">
              <div class="w-col w-col-6">
                <div>
                  <select id="field-3" name="field-3" id="field-3" data-name="Field 3" required="" class="w-select">
                    <option value="">Select language to translate from...</option>
                    {% for lang in languages %}  
                        <option value="{{lang.iso_code}}">{{lang.name}}</option>
                    {% endfor %} 
                    
                  </select>
                </div>
                <div id="textarea-container">
                <textarea placeholder="Example Text to translate" maxlength="5000" id="field-2" name="field-2" data-name="field" class="textarea-2 w-input"></textarea>
                {% comment %} <a href="#"><img src="https://cdn-icons-png.flaticon.com/512/25/25682.png" height="16px" width="16px"/></a> {% endcomment %}
                </div>
              </div>

              <div class="column w-col w-col-1">
                <a href="#" class="button-2 w-button" id="switchlang"></a>
                <a href="#"></a>
              </div>
              <div class="w-col w-col-5">
                <div>
                  <select id="field-4" name="field-4" id="field-4" data-name="Field 4" class="w-select">
                    <option value="">Select language to translate to...</option>
                    {% for lang in languages %}  
                        <option value="{{lang.iso_code}}">{{lang.name}}</option>
                    {% endfor %} 
                  </select>
                </div>
                <textarea placeholder="Example Text" maxlength="5000" id="field" name="field" data-name="field" class="textarea w-input"></textarea>
                <div class="rate" id="rating">Rate this translation &nbsp; &nbsp;</div>
              </div>
            </div>
          </form>
          <div class="w-form-done">
            <div>Thank you! Your submission has been received!</div>
          </div>
          <div class="w-form-fail">
            <div>Oops! Something went wrong while submitting the form.</div>
          </div>
        </div>
      </div>
    </div>
    <div class="section press wf-section">
      <div class="w-container">       
        <div class="small-text">KEY LANGUAGES</div>
        <div class="div-block">
            <img src="https://uploads-ssl.webflow.com/6330f9dbe239121517e39573/63310c424a0d2fa9ad84602e_england.png" width="70" alt="" class="logo" />
          <img src="https://uploads-ssl.webflow.com/6330f9dbe239121517e39573/63310c2e047920140dcb6cbf_france%20(2).png" width="70" alt="" class="logo" />
          <img src="https://uploads-ssl.webflow.com/6330f9dbe239121517e39573/63310c544a0d2f5c27846049_germany.png" width="70" alt="" class="logo" />
          <img src="https://uploads-ssl.webflow.com/6330f9dbe239121517e39573/63310c6ee846c0877cfbdf88_spain.png" width="70" alt="" class="logo" />
          <img src="https://uploads-ssl.webflow.com/6330f9dbe239121517e39573/63310c9aff3a74253c38a8d2_china.png" width="70" alt="" class="logo" />
        </div>
      </div>
    </div>
    <div id="features" class="section wf-section">
      <div class="w-container">
        <h2>Key app features</h2>
        <div class="section-subtitle">Our app has all the features to make your translation experience memorable</div>
        <div class="small-features-row w-row">
          <div class="w-col w-col-4">
            <div class="feature">
              <img src="https://uploads-ssl.webflow.com/6330f9dbe239121517e39573/63319f33901c1d578fabd062_text-detection.png" height="30" alt="" class="feature-icon" />
              <h3>Auto detect language</h3>
              <p class="paragraph">Our translator will automatically detect the language of the text that you type in the text area </p>
            </div>
          </div>
          <div class="w-col w-col-4">
            <div class="feature">
              <img src="https://uploads-ssl.webflow.com/6330f9dbe239121517e39573/63310416e5a254656c17f39c_swap.png" height="30" alt="" class="feature-icon" />
              <h3>Swap languages</h3>
              <p>You can easily swap between the language you are translating from to the language you are translating to</p>
            </div>
          </div>
          {% comment %} <div class="w-col w-col-3">
            <div class="feature">
              <img src="https://uploads-ssl.webflow.com/6330f9dbe239121517e39573/63319f800474c855b088ca2e_share.png" height="30" alt="" class="feature-icon" />
              <h3>Share Translation</h3>
              <p>After translating text, you can share it out to the world and let your friends know about our translator</p>
            </div>
          </div> {% endcomment %}
          <div class="w-col w-col-4">
            <div class="feature">
              <img src="https://uploads-ssl.webflow.com/6330f9dbe239121517e39573/63319fc7ddae1bb52f01f3bd_star.png" height="30" alt="" class="feature-icon" />
              <h3>Rate translation</h3>
              <p>After a successful language translation, you can rate our language translation by upvoting or downvoting</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="section footer copyright wf-section">
      <div class="w-container">
        <div>Copyright 2022 Mazda. All Rights Reserved. </div>
      </div>
    </div>
    <!-- <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=6330f9dbe239121517e39573" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="https://uploads-ssl.webflow.com/6330f9dbe239121517e39573/js/webflow.46ed9900f.js" type="text/javascript"></script> -->
    <!--[if lte IE 9]>
		<script src="//cdnjs.cloudflare.com/ajax/libs/placeholders/3.0.2/placeholders.min.js"></script>
		<![endif]-->
    <script type="text/javascript">
        $(document).ready(function() {
            $( '.rate' ).hide();
            translate();
            
            $("#switchlang").on('click', function (ev) {
                switchLanguages();
            });
        });

        //  target : target html element
        //  max : number of stars, default 5
        //  now : number of stars now, default 0
        //  disabled : cannot change number of stars/click, default false
        //  click : run this function when user click on star
        function starry (instance) {
        // (A) SET DEFAULTS
        if (instance.max === undefined) { instance.max = 5; }
        if (instance.now === undefined) { instance.now = 0; }
        if (instance.now > instance.max) { instance.now = instance.max; }
        if (instance.disabled === undefined) { instance.disabled = false; }

        // (B) GENERATE STARS
        instance.target.classList.add("starwrap");
        for (let i=1; i<=instance.max; i++) {
            // (B1) CREATE HTML STAR
            let s = document.createElement("div");
            s.className = "star";
            instance.target.appendChild(s);

            // (B2) HIGHLIGHT STAR
            if (i <= instance.now) { s.classList.add("on"); }

            if (!instance.disabled) {
            // (B3) ON MOUSE OVER
            s.onmouseover = () => {
                let all = instance.target.getElementsByClassName("star");
                for (let j=0; j<all.length; j++) {
                if (j<i) { all[j].classList.add("on"); }
                else { all[j].classList.remove("on"); }
                }
            };

            // (B4) ON CLICK
            if (instance.click) { s.onclick = () => { instance.click(i); }; }
            }
        }

        // (C) GET NUMBER OF SELECTED STARS
        instance.target.getstars = () => {
            return instance.target.querySelectorAll(".on").length;
        };
        }

    function switchLanguages () {
        //this will swap the values in the select boxes
        var co=$("#field-3").val();
        //console.log("translate from language" + co)
        $("#field-3").val($("#field-4").val()).change();
        $("#field-4").val(co).change();

        //$("div.id_100 select").val("val2").change();   fr // en   en // fr

        //this will swap the values in thye text areas
        var co1=$("#field-2").val();
        //console.log("translate from language text" + co1)
        $("#field-2").val($("#field").val()).change();
        $("#field").val(co1).change();
  
        //$("#field").val("");
        translate();
    }
    </script>

    {% comment %} <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script> {% endcomment %}
    <script type="text/javascript">
        function translate() {
            
            $('#field-2').keydown(function(){                                              

            //pick the data from our page forms
            var TextToTranslate = $('#field-2').val();
            var LanguageToTransFrom = $('#field-3').val();
            var LanguageToTransTo = $('#field-4').val();


            //if LanguageToTransFrom is not empty then directly translate else autodetect
            if (LanguageToTransTo != ""){
                if (LanguageToTransFrom != ""){
                    $.ajax(
                        {
                            type:"GET",
                            url: "/translateText",
                            data:{
                                    TextToTranslate: TextToTranslate,
                                    LanguageToTransFrom: LanguageToTransFrom,
                                    LanguageToTransTo: LanguageToTransTo

                            },
                            success: function( data ) 
                            {
                                //$( '#like'+ catid ).remove();                               
                                $( '#field' ).val(data);
                                console.log(data);
                                $( '.rate' ).show();
                            }
                        })
                }else{
                    $.ajax(
                        {
                            type:"GET",
                            url: "/autoDetectText",
                            data:{
                                    TextToTranslate: TextToTranslate,
                                    LanguageToTransTo: LanguageToTransTo

                            },
                            success: function( data) 
                            {
                                //$( '#like'+ catid ).remove();
                                var mystring = data;
                                var mysubstring = mystring.substring(14, 16);  //fr, en

                                $("#field-3").val(mysubstring);
                                $( '#field' ).val(data);

                            }
                        })

                }

            }else{
                alert("Language to translate to cannot be empty");
            }


        
        });
     }
</script>

<script>
    starry({
    // (C1) REQUIRED
        target: document.getElementById("rating"),
        // (C2) OPTIONAL
        max: 5,
        now: 3,
    // disabled: true,
        click : (stars) => { 
            //alert(stars); 
            //send rating to database
              saveRating(stars)
            
            }
    });

    function saveRating(rating){
        $.ajax(
            {
                type:"GET",
                url: "/SaveRating",
                data:{
                        rating: rating,

                },
                success: function(data) 
                {
                   alert("rated")
                }
            })
    }

    // (D) TO GET NUMBER OF STARS PROGRAMMATICALLY
        var stars = document.getElementById("rating").getstars();
        console.log(stars);
</script>
  </body>
</html>